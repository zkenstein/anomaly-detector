# TODO

**Május 15** a határidő. Addig el kell készítenem a programot és a dokumentációt.

## Program

**Az adatok feldolgozása**:
- Mindig ugyanazt a skálázót kell használni. Annak paraméterei a forráskódba vannak mentve.
- A ponthalmazfeldolgozó egy python program, ami a kapott paraméterek alapján legyárt egy ponthalmazt. A ponthalmaz tulajdonságai:
	- **type**: *training* vagy *testing*
	- **date**:
		- training esetén: *év-hónap,év-hónap,...*, például *2013-11,2013-12,2014-01*
		- testing esetén: *év-hónap-nap*, például *2013-12-09*
	- **square**: egy szám 0 és 9999 közt. Training esetén lehet *all* is.
	- **feature**: *call-in*, *call-out*, *sms-in*, *sms-out*, *internet* vagy *foreign*
- A ponthalmazgyártó egy python program, ami a ponthalmazfeldolgozó segítségével legyártja a lent definiált ponthalmazokat és elmenti azokat egy SQLite adatbázisba. A következő ponthalmazokat kell létrehoznia:
  	- *training 2013-11 {all, 0, 1, ..., 9999} {call-in, call-out, sms-in, sms-out, internet, foreign}*: ez `10001 * 6 = 60006` db ponthalmaz
	- *testing {2013-12-01, ..., 2013-12-31, 2014-01-01} {0, 1, ..., 9999} {call-in, call-out, sms-in, sms-out, internet, foreign}*: ez `32 * 10000 * 6 = 1920000` db ponthalmaz
	- Ez összesen 1980006 db ponthalmaz.

**Anomália detektálás**:
- Egy python program fogja végezni, ami megkapja paraméterként az időszakasz kezdetét és a végét, illetve az aktív featureök számát. Kiszámolja minden cellához, hogy mennyire tér el a megszokottól (0-nál >= pozitív lebegőpontos szám). Visszaküldi ezeket a cella-érték párokat.

**A webapp minimális funkciói**:
- A főoldal nagy részét egy térkép foglalja el. Ez a térkép 10000 cellára van felosztva. A cella színe jelzi, hogy mennyire volt kiugró az aktivitás.
- Konfigurálható:
	- *Időszakasz*: Az időszakaszt egy idővonalon a kezdő és a végpont megadásával lehet kiválasztani. A UI segít a szakasz léptetésében / változtatásában.
	- *Az aktív featureök*.
- Látható egy színskála, amivel eldönthető, hogy az adott érték mennyire kiugró.

**A webapp minimális funkcióinak megvalósítása**:
- A térkép egy google maps.
- A cellák poligonjai el lesznek tárolva egy sqlite adatbázisban a backenden, amiket a kliens 1 kéréssel meg tud kapni a backendtől.
- A cellák értékeit a kliens a backendtől kéri le, mégpedig 1 hívással mind a 10000 celláét. A kliens a konfigurációt elküldi a requestben.
- A színskála statikusan van benne a kliens kódjában.

**A webapp további funkciói**:
Ha lesz rá időm.

### algorithm

- A country code segítségével csinálni egy új feature-t.
- Ponthalmaz feldolgozó program lefejlesztése.
- Ponthalmaz gyártó program lefejlesztése és lefuttatása.
- Az anomália detektáló program lefejlesztése.
- Unit tesztek írása.

### webapp

- A backenden legyenek eltárolva a cellák polinomjai, amik lekérdezhetőek.
- A kliens jelenítse meg a cellákat a térképen.
- A kliens jelenítse meg az időszakasz választó komponenst.
- A kliens jelenítse meg az aktív featureöket váalsztó komponenst.
- A kliens jelenítse meg a színskálát.
- A backend ki tudja számolni a python script segítségével a cellák értékét és azt vissza tudja küldeni a kliensnek, aki azt megjeleníti.
- Dokumentációs írása és generáló tool keresése.
- Unit tesztek írása.

## Dokumentáció

A program megírása után kezdek bele.

# Anomaly Detector

This is an anomaly detector for call detail records ([CDR](https://en.wikipedia.org/wiki/Call_detail_record)). It's my BSc thesis, which I'm working on. You can check the announcement at `docs/thesis-announcement.pdf`.

## Dataset

I'm using the Telecom Italia's data. You can download the dataset from [here](https://dandelion.eu/datamine/open-big-data/). It licensed under [ODbL](https://opendatacommons.org/licenses/odbl/).

### CDR

The description of the CDR dataset is copied to here:

> This dataset provides information about the telecommunication activity over the city.
>
> The dataset is the result of a computation over the Call Detail Records (CDRs) generated by the Telecom Italia cellular network over the city. CDRs log the user activity for billing purposes and network management. There are many types of CDRs, for the generation of this dataset we considered those related to the following activities:
>- Received SMS: a CDR is generated each time a user receives an SMS
>- Sent SMS: a CDR is generated each time a user sends an SMS
>- Incoming Calls: a CDR is generated each time a user receives a call
>- Outgoing Calls: CDR is generated each time a user issues a call
>- Internet: a CDR is generate each time
>	- a user starts an internet connection
>	- a user ends an internet connection
>	- during the same connection one of the following limits is reached:​
>		- 15 minutes from the last generated CDR
>		- 5 MB from the last generated CDR
>
> By aggregating the aforementioned records it was created this dataset that provides SMSs, calls and Internet traffic activity. It measures the level of interaction of the users with the mobile phone network; for example the higher is the number of SMS sent by the users, the higher is the activity of the sent SMS. Measurements of call and SMS activity have the same scale (therefore are comparable); those referring to Internet traffic do not.

#### Schema for CDR

All the types are numeric.

1. **Square id**: The id of the square that is part of the city GRID.
2. **Time interval**: The beginning of the time interval expressed as the number of millisecond elapsed from the Unix Epoch on January 1st, 1970 at UTC. The end of the time interval can be obtained by adding 600000 milliseconds (10 minutes) to this value.
3. **Country code**: The phone country code of a nation. Depending on the measured activity this value assumes different meanings that are explained later.
4. **SMS-in activity**: The activity in terms of received SMS inside the Square id, during the Time interval and sent from the nation identified by the Country code.
5. **SMS-out activity**: The activity in terms of sent SMS inside the Square id, during the Time interval and received by the nation identified by the Country code.
6. **Call-in activity**: The activity in terms of received calls inside the Square id, during the Time interval and issued from the nation identified by the Country code.
7. **Call-out activity**: The activity in terms of issued calls inside the Square id, during the Time interval and received by the nation identified by the Country code.
8. **Internet traffic activity**: The activity in terms of performed internet traffic inside the Square id, during the Time interval and by the nation of the users performing the connection identified by the Country code.

#### Format for CDR

Files are in tsv format. If no activity was recorded for a field specified in the schema above then the corresponding value is missing from the file. For example, if for a given combination of the Square id `s`, the Time interval `i` and the Country code `c` no SMS was sent the corresponding record looks as follows:

`s \t i \t c \t \t SMSout \t Callin \t Callout \t Internettraffic`

where `\t` corresponds to the tab character, `SMSout` is the value corresponding to the SMS-out activity, `Callin` is the value corresponding to the Call-in activity, `Callout` is the value corresponding to the Call-out activity and `internettraffic` is the value corresponding to the  Internet traffic activity.

Moreover, if for a given combination of the Square id `s`, the Time interval `i` and the Country code `c` no activity is recorded the corresponding record is missing from the dataset. This means that records of the following type

`s \t i \t c \t \t \t \t \t`

are not stored in the dataset.
